# Facebook Scraper API

## ๐ ูุธุฑุฉ ุนุงูุฉ

API ูุชูุฏู ูุณุญุจ ุงูุชูุงุนูุงุช ูุงูููููุชุงุช ูู ููุณุจูู ุจุงุณุชุฎุฏุงู Threading ูููุนุงูุฌุฉ ุงููุชูุงุฒูุฉ.

## ๐ ุงููููุฒุงุช

- **ูุนุงูุฌุฉ ูุชูุงุฒูุฉ**: ุชุดุบูู ุนุฏุฉ ููุงู ูู ููุณ ุงูููุช
- **ุชุชุจุน ูุจุงุดุฑ**: ูุชุงุจุนุฉ ุชูุฏู ุงูููุงู ูู ุงูููุช ุงููุนูู
- **ุชูุธูู ุชููุงุฆู**: ุญุฐู ุงููููุงุช ุงูููุชููุฉ ุงูุตูุงุญูุฉ ุชููุงุฆูุงู
- **ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ**: ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ
- **ุฏุนู ุงูุนุฑุจูุฉ**: ูุงุฌูุฉ ูุชูุซูู ุจุงููุบุฉ ุงูุนุฑุจูุฉ

## ๐ฆ ุงูุชุซุจูุช

```bash
# ุชุซุจูุช ุงููุชุทูุจุงุช
pip install -r requirements.txt

# ุชุดุบูู ุงูุฎุงุฏู
python run.py
```

## ๐ ุงููุงุฌูุงุช ุงููุชุงุญุฉ

### ุงูุชูุงุนูุงุช (Reactions)
- `POST /api/v1/reactions/scrape` - ุจุฏุก ุณุญุจ ุงูุชูุงุนูุงุช
- `GET /api/v1/reactions/status/{job_id}` - ูุชุงุจุนุฉ ุญุงูุฉ ุงููููุฉ
- `GET /api/v1/reactions/download/{job_id}` - ุชุญููู ุงููุชุงุฆุฌ

### ุงูููููุชุงุช (Comments)
- `POST /api/v1/comments/scrape` - ุจุฏุก ุณุญุจ ุงูููููุชุงุช
- `GET /api/v1/comments/status/{job_id}` - ูุชุงุจุนุฉ ุญุงูุฉ ุงููููุฉ
- `GET /api/v1/comments/download/{job_id}` - ุชุญููู ุงููุชุงุฆุฌ

### ุงููุธุงู
- `GET /health` - ูุญุต ุญุงูุฉ ุงููุธุงู
- `GET /jobs` - ููุฎุต ุงูููุงู
- `GET /docs` - ุงูุชูุซูู ุงูุชูุงุนูู

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุณุญุจ ุงูุชูุงุนูุงุช

```bash
curl -X POST "http://localhost:8000/api/v1/reactions/scrape" \
  -H "Content-Type: application/json" \
  -d '{
    "post_url": "https://www.facebook.com/post/123",
    "limit": 100,
    "delay": 2.5,
    "cookies": [
      {
        "domain": ".facebook.com",
        "name": "c_user",
        "value": "100076386722911",
        "path": "/",
        "secure": true,
        "httpOnly": false
      }
    ]
  }'
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "job_id": "reactions_20241215_143022_abc123",
  "status": "running",
  "message": "ุชู ุจุฏุก ุณุญุจ ุงูุชูุงุนูุงุช ุจูุฌุงุญ",
  "estimated_time": "2-5 ุฏูุงุฆู",
  "created_at": "2024-12-15T14:30:22Z"
}
```

### 2. ูุชุงุจุนุฉ ุญุงูุฉ ุงููููุฉ

```bash
curl "http://localhost:8000/api/v1/reactions/status/reactions_20241215_143022_abc123"
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "job_id": "reactions_20241215_143022_abc123",
  "status": "running",
  "progress": {
    "percentage": 45,
    "message": "ุฌุงุฑู ุฌูุจ ุงูุตูุญุฉ 3...",
    "current_page": 3,
    "items_scraped": 150,
    "updated_at": "2024-12-15T14:32:15Z"
  },
  "started_at": "2024-12-15T14:30:25Z"
}
```

### 3. ุชุญููู ุงููุชุงุฆุฌ

```bash
curl -O "http://localhost:8000/api/v1/reactions/download/reactions_20241215_143022_abc123"
```

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช

ูููู ุชุฎุตูุต ุงูุฅุนุฏุงุฏุงุช ูู `app/config.py`:

```python
class Settings:
    # ุฅุนุฏุงุฏุงุช ุงูุฎุงุฏู
    HOST: str = "0.0.0.0"
    PORT: int = 8000
    
    # ุฅุนุฏุงุฏุงุช Threading
    MAX_CONCURRENT_JOBS: int = 5
    JOB_TIMEOUT_MINUTES: int = 30
    
    # ุฅุนุฏุงุฏุงุช ุงูุชุฎุฒูู
    RESULTS_DIR: str = "api_results"
    CLEANUP_AFTER_HOURS: int = 24
```

## ๐ ุงูุฃูุงู

### ุงูููููุฒ ุงููุทููุจุฉ
- `c_user`: ูุนุฑู ุงููุณุชุฎุฏู
- `xs`: ุชููู ุงูุฌูุณุฉ
- `fr`: ุชููู ุงูุชุญุฏูุซ

### ูุตุงุฆุญ ุงูุฃูุงู
- ุงุณุชุฎุฏู HTTPS ูู ุงูุฅูุชุงุฌ
- ุงุญู ูููุงุช ุงูููููุฒ
- ุฑุงูุจ ูุนุฏู ุงูุทูุจุงุช
- ุงุณุชุฎุฏู ูุนุฑูุงุช API ูููุตุงุฏูุฉ

## ๐ ูุฑุงูุจุฉ ุงูุฃุฏุงุก

### ูุญุต ุญุงูุฉ ุงููุธุงู
```bash
curl "http://localhost:8000/health"
```

### ููุฎุต ุงูููุงู
```bash
curl "http://localhost:8000/jobs"
```

## ๐๏ธ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฃุฎุทุงุก ุดุงุฆุนุฉ

1. **429 Too Many Requests**
   - ุงูุณุจุจ: ุชุฌุงูุฒ ุงูุญุฏ ุงูุฃูุตู ููููุงู ุงููุชุฒุงููุฉ
   - ุงูุญู: ุงูุชุธุฑ ุงูุชูุงุก ุจุนุถ ุงูููุงู

2. **400 Invalid URL**
   - ุงูุณุจุจ: ุฑุงุจุท ููุณุจูู ุบูุฑ ุตุญูุญ
   - ุงูุญู: ุชุฃูุฏ ูู ุตุญุฉ ุงูุฑุงุจุท

3. **401 Invalid Cookies**
   - ุงูุณุจุจ: ููููุฒ ููุชููุฉ ุงูุตูุงุญูุฉ ุฃู ุบูุฑ ุตุญูุญุฉ
   - ุงูุญู: ุญุฏุซ ุงูููููุฒ ูู ุงููุชุตูุญ

## ๐ ูููู ุงููุดุฑูุน

```
facebook-scraper-api/
โโโ app/
โ   โโโ api/          # API endpoints
โ   โโโ core/         # Core logic (job manager)
โ   โโโ models/       # Pydantic models
โ   โโโ scrapers/     # Scraper classes
โ   โโโ config.py     # Configuration
โ   โโโ main.py       # FastAPI application
โโโ api_results/      # Results storage
โโโ requirements.txt  # Dependencies
โโโ run.py           # Runner script
โโโ README_API.md    # Documentation
```

## ๐ ุชุทููุฑ ุงููุดุฑูุน

### ุฅุถุงูุฉ ููุฒุฉ ุฌุฏูุฏุฉ
1. ุฃูุดุฆ endpoint ูู `app/api/`
2. ุฃุถู models ูู `app/models/`
3. ุญุฏุซ `app/main.py` ูุชุถููู ุงูู router

### ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก
```bash
# ุงุฎุชุจุงุฑ ุงูุญูููุฉ
ab -n 100 -c 10 http://localhost:8000/health

# ูุฑุงูุจุฉ ุงูุฐุงูุฑุฉ
htop
```

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงูู:
- ุชุญูู ูู `/docs` ููุชูุซูู ุงูุชูุงุนูู
- ุฑุงุฌุน logs ุงูุฎุงุฏู ููุชูุงุตูู
- ุงุณุชุฎุฏู `/health` ููุญุต ุญุงูุฉ ุงููุธุงู

